<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Negociações</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/bootstrap-theme.css">

    <!-- carregando nosso polyfill -->
    <script src="js/app/polyfill/es6.js"></script>    
    
</head>
<body class="container">
    
    <!-- 

        É possível que todo o código escrito em ES6 funcione em navegadores que nem 
        suportem a nova versão do JavaScript. Para isso é necessário o uso de um transpiler. 
        Aliás, um ótimo assunto a ser abordado no terceiro módulo deste treinamento. 
        Não é mesmo? ;)

        Vale salientar que os grandes vilões de compatibilidade do código JavaScript 
        são os browsers mobile. A solução com transpiler é uma solução que abarca 
        também esses dispositivos.

    -->


    <h1 class="text-center">Negociações</h1>

    <div id="msgView"></div>
    
    <form class="form" onsubmit="negociacaoController.adicionar(event);">
        
        <div class="form-group">
            <label for="data">Data</label>
            <input type="date" id="data" class="form-control" required autofocus/>        
        </div>    
        
        <div class="form-group">
            <label for="quantidade">Quantidade</label>
            <input type="number" min="1" step="1" id="quantidade" class="form-control" value="1" required/>
        </div>
        
        <div class="form-group">
            <label for="valor">Valor</label>
            <input id="valor" type="number" class="form-control"  min="0.01" step="0.01" value="0.0" required />
        </div>
        
        <button class="btn btn-primary" type="submit">Incluir</button>
    </form>
    
    <div class="text-center">
        <button onclick="negociacaoController.importar()" class="btn btn-primary text-center" type="button">
            Importar Negociações
        </button>
        <button onclick="negociacaoController.apagar();" class="btn btn-primary text-center" type="button">
            Apagar
        </button>
    </div> 
    <br>
    <br>

    <!-- Tabela com os valores -->
    <div id="negView"></div>

    <script src="js/app/views/View.js"></script>
    <script src="js/app/views/NegociacaoView.js"></script>
    <script src="js/app/views/MensagemView.js"></script>

    <script src="js/app/models/Negociacao.js"></script>
    <script src="js/app/models/NegociacaoLista.js"></script>
    <script src="js/app/models/Mensagem.js"></script>

    <script src="js/app/controllers/NegociacaoController.js"></script>

    <script src="js/app/helpers/DateHelper.js"></script>
    <script src="js/app/helpers/Bind.js"></script>

    <script src="js/app/services/ProxyFactory.js"></script>
    <script src="js/app/services/NegociacaoService.js"></script>
    <script src="js/app/services/HttpService.js"></script>

    <script>
        var negociacaoController = new NegociacaoController();
    </script>


    <script>
    
        let nroExemplo = 3;

        if ( nroExemplo == 1 ) {

            let dadosServidor = [
                [
                    [new Date(), 1, 100],
                    [new Date(), 2, 100]
                ],
                [
                    [new Date(), 1, 150],
                    [new Date(), 2, 300]
                ],
                [
                    [new Date(), 3, 50],
                    [new Date(), 1, 100]
                ]        
            ];

            let listaNeg = dadosServidor
                .reduce( (arrTotal, arr) => arrTotal.concat(arr), [])
                .map( neg => new Negociacao(neg[0],neg[1],neg[2]) );

            console.log(listaNeg);

        } 
    
        if ( nroExemplo == 2 ) {

            // let listaNro = [10, 5, 2, 4, 1, 22, 8];
            let listaNro = ['bispo','negao','israel', 'aument'];
            // listaNro.sort((a,b) => a==b?0:a<b?-1:1);
            // listaNro.sort((a,b) => a-b);
            listaNro.sort();
            // listaNro.reverse();

            console.log(listaNro);

        }



    </script>


</body>
</html>